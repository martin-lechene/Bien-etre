CREATE TABLE categorie_de_services (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(10) NOT NULL, description VARCHAR(10) NOT NULL, en_avant TINYINT(1) NOT NULL, valide TINYINT(1) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
-- Doctrine Migration File Generated on 2022-01-27 19:35:39

-- Version DoctrineMigrations\Version20211209183848
CREATE TABLE categorie_de_services (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(10) NOT NULL, description VARCHAR(10) NOT NULL, en_avant TINYINT(1) NOT NULL, valide TINYINT(1) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE images (id INT AUTO_INCREMENT NOT NULL, ordre INT NOT NULL, image LONGBLOB NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE prestataire (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(255) NOT NULL, siteweb VARCHAR(255) NOT NULL, num_tel VARCHAR(10) NOT NULL, num_tva VARCHAR(10) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

-- Version DoctrineMigrations\Version20211209190828
ALTER TABLE prestataire CHANGE num_tva num_tva VARCHAR(20) NOT NULL;

-- Version DoctrineMigrations\Version20211209191147
ALTER TABLE categorie_de_services CHANGE nom nom VARCHAR(30) NOT NULL;

-- Version DoctrineMigrations\Version20211216124228
CREATE TABLE prestataire_categorie_de_services (prestataire_id INT NOT NULL, categorie_de_services_id INT NOT NULL, INDEX IDX_603DD9ABBE3DB2B7 (prestataire_id), INDEX IDX_603DD9AB4A81A587 (categorie_de_services_id), PRIMARY KEY(prestataire_id, categorie_de_services_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE prestataire_categorie_de_services ADD CONSTRAINT FK_603DD9ABBE3DB2B7 FOREIGN KEY (prestataire_id) REFERENCES prestataire (id) ON DELETE CASCADE;
ALTER TABLE prestataire_categorie_de_services ADD CONSTRAINT FK_603DD9AB4A81A587 FOREIGN KEY (categorie_de_services_id) REFERENCES categorie_de_services (id) ON DELETE CASCADE;

-- Version DoctrineMigrations\Version20220123171154
CREATE TABLE abus (Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Encodage DATE DEFAULT NULL, id INT NOT NULL, InternauteID INT DEFAULT NULL, CommentaireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE bloc (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Les noms attribu?s doivent ?tre uniques. Ils servent ? identifier les diff?rents blocs.', Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE cat?goriedeservices (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, EnAvant TINYINT(1) DEFAULT NULL COMMENT 'Attention, il ne peut y avoir qu''un seul service mis en avant ? la fois.', Valid TINYINT(1) DEFAULT NULL COMMENT 'Ce champ permet de savoir si la cat?gorie de services a ?t? encod?e par un prestataire et pas encore valid?e par un administrateur.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE categorys (id INT AUTO_INCREMENT NOT NULL, name INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE codepostal (CodePostal CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'La valeur de chaque code postal doit ?tre unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE commentaire (Titre CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Contenu CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Cote INT DEFAULT NULL COMMENT 'Valeur entre 0 et 5 repr?sent? id?alement avec des ?toiles.', Encodage DATE DEFAULT NULL, id INT NOT NULL, PrestataireID INT DEFAULT NULL, InternauteID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE commune (Commune CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Le nom de chaque commune doit ?tre unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE favori (PrestataireID INT DEFAULT NULL, InternauteID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE images (Ordre INT DEFAULT NULL, Image BLOB DEFAULT NULL, id INT NOT NULL, Cat?gorieDeServicesID INT DEFAULT NULL, InternauteID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE internaute (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Pr?nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Newsletter TINYINT(1) DEFAULT NULL COMMENT 'Ce champ indique si l''internaute est ou non abonn? aux newsletters. Si oui, il recevra automatiquement un mail lui annon?ant la pr?sence d''une nouvelle newsletter lorsque celle-ci sera ajout?e.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE localit (Localit CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Le nom de chaque localit? est unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE newsletter (Publication DATE DEFAULT NULL, Titre CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, DocumentPdf BLOB DEFAULT NULL, id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE position (Ordre INT DEFAULT NULL, id INT NOT NULL, InternauteID INT DEFAULT NULL, BlocID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE prestataires (name CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, website CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, number_phone CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, number_TVA CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, id INT NOT NULL, userID INT DEFAULT NULL, url_logo VARCHAR(50) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, desc_long VARCHAR(255) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, desc_short VARCHAR(255) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, date_create DATE NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE promotion (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, DocumentPdf BLOB DEFAULT NULL, D?but DATE DEFAULT NULL, Fin DATE DEFAULT NULL, AffichageDe DATE DEFAULT NULL, AffichageJusque DATE DEFAULT NULL, id INT NOT NULL, CategorysServiceID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE proposer (CategorysServiceID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE stage (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Tarif CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, InfoCompl?mentaire CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, D?but DATE DEFAULT NULL, Fin DATE DEFAULT NULL, AffichageDe DATE DEFAULT NULL, AffichageJusque DATE DEFAULT NULL, id INT NOT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE utilisateur (Email CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Adresse email valide (du moins dans sa forme c?d : ccc@cccc.ccc). Cette adresse doit ?tre unique.', MotDePasse CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Il s''agit du mot de passe crypt', AdresseN? CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, AdresseRue CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Inscription DATE DEFAULT NULL, TypeUtilisateur CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Il s''agit soit d''un Prestataire, soit d''un Internaute, soit d''un Administrateur', NbEssaisInfructueux INT DEFAULT NULL COMMENT 'Chaque fois qu''une authentification est infructueuse, le compteur est incr?ment? d''une unit?. Ce compteur sera remis ? 0 lorsque le compte sera d?bloqu? par un administrateur.', Banni TINYINT(1) DEFAULT NULL COMMENT 'Indique qu''un utilisateur (quel que soit son type) est banni. Cela veut dire qu''il ne pourra plus s''authentifier sur le site.', Inscript.Conf TINYINT(1) DEFAULT NULL COMMENT 'Indique si l''inscription est confirm?e ou non. Sans confirmation, l''utilisateur ne peux pas s''authentifi', id INT NOT NULL, CodePostalID INT DEFAULT NULL, CommuneID INT DEFAULT NULL, InternauteID INT DEFAULT NULL, Localit?ID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

-- Version DoctrineMigrations\Version20220123171323

-- Version DoctrineMigrations\Version20220127192548-- Doctrine Migration File Generated on 2022-01-27 19:35:39

-- Version DoctrineMigrations\Version20211209183848
CREATE TABLE categorie_de_services (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(10) NOT NULL, description VARCHAR(10) NOT NULL, en_avant TINYINT(1) NOT NULL, valide TINYINT(1) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE images (id INT AUTO_INCREMENT NOT NULL, ordre INT NOT NULL, image LONGBLOB NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE prestataire (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(255) NOT NULL, siteweb VARCHAR(255) NOT NULL, num_tel VARCHAR(10) NOT NULL, num_tva VARCHAR(10) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

-- Version DoctrineMigrations\Version20211209190828
ALTER TABLE prestataire CHANGE num_tva num_tva VARCHAR(20) NOT NULL;

-- Version DoctrineMigrations\Version20211209191147
ALTER TABLE categorie_de_services CHANGE nom nom VARCHAR(30) NOT NULL;

-- Version DoctrineMigrations\Version20211216124228
CREATE TABLE prestataire_categorie_de_services (prestataire_id INT NOT NULL, categorie_de_services_id INT NOT NULL, INDEX IDX_603DD9ABBE3DB2B7 (prestataire_id), INDEX IDX_603DD9AB4A81A587 (categorie_de_services_id), PRIMARY KEY(prestataire_id, categorie_de_services_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE prestataire_categorie_de_services ADD CONSTRAINT FK_603DD9ABBE3DB2B7 FOREIGN KEY (prestataire_id) REFERENCES prestataire (id) ON DELETE CASCADE;
ALTER TABLE prestataire_categorie_de_services ADD CONSTRAINT FK_603DD9AB4A81A587 FOREIGN KEY (categorie_de_services_id) REFERENCES categorie_de_services (id) ON DELETE CASCADE;

-- Version DoctrineMigrations\Version20220123171154
CREATE TABLE abus (Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Encodage DATE DEFAULT NULL, id INT NOT NULL, InternauteID INT DEFAULT NULL, CommentaireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE bloc (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Les noms attribu?s doivent ?tre uniques. Ils servent ? identifier les diff?rents blocs.', Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE cat?goriedeservices (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, EnAvant TINYINT(1) DEFAULT NULL COMMENT 'Attention, il ne peut y avoir qu''un seul service mis en avant ? la fois.', Valid TINYINT(1) DEFAULT NULL COMMENT 'Ce champ permet de savoir si la cat?gorie de services a ?t? encod?e par un prestataire et pas encore valid?e par un administrateur.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE categorys (id INT AUTO_INCREMENT NOT NULL, name INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE codepostal (CodePostal CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'La valeur de chaque code postal doit ?tre unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE commentaire (Titre CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Contenu CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Cote INT DEFAULT NULL COMMENT 'Valeur entre 0 et 5 repr?sent? id?alement avec des ?toiles.', Encodage DATE DEFAULT NULL, id INT NOT NULL, PrestataireID INT DEFAULT NULL, InternauteID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE commune (Commune CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Le nom de chaque commune doit ?tre unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE favori (PrestataireID INT DEFAULT NULL, InternauteID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE images (Ordre INT DEFAULT NULL, Image BLOB DEFAULT NULL, id INT NOT NULL, Cat?gorieDeServicesID INT DEFAULT NULL, InternauteID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE internaute (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Pr?nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Newsletter TINYINT(1) DEFAULT NULL COMMENT 'Ce champ indique si l''internaute est ou non abonn? aux newsletters. Si oui, il recevra automatiquement un mail lui annon?ant la pr?sence d''une nouvelle newsletter lorsque celle-ci sera ajout?e.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE localit (Localit CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Le nom de chaque localit? est unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE newsletter (Publication DATE DEFAULT NULL, Titre CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, DocumentPdf BLOB DEFAULT NULL, id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE position (Ordre INT DEFAULT NULL, id INT NOT NULL, InternauteID INT DEFAULT NULL, BlocID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE prestataires (name CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, website CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, number_phone CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, number_TVA CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, id INT NOT NULL, userID INT DEFAULT NULL, url_logo VARCHAR(50) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, desc_long VARCHAR(255) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, desc_short VARCHAR(255) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, date_create DATE NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE promotion (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, DocumentPdf BLOB DEFAULT NULL, D?but DATE DEFAULT NULL, Fin DATE DEFAULT NULL, AffichageDe DATE DEFAULT NULL, AffichageJusque DATE DEFAULT NULL, id INT NOT NULL, CategorysServiceID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE proposer (CategorysServiceID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE stage (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Tarif CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, InfoCompl?mentaire CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, D?but DATE DEFAULT NULL, Fin DATE DEFAULT NULL, AffichageDe DATE DEFAULT NULL, AffichageJusque DATE DEFAULT NULL, id INT NOT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE utilisateur (Email CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Adresse email valide (du moins dans sa forme c?d : ccc@cccc.ccc). Cette adresse doit ?tre unique.', MotDePasse CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Il s''agit du mot de passe crypt', AdresseN? CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, AdresseRue CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Inscription DATE DEFAULT NULL, TypeUtilisateur CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Il s''agit soit d''un Prestataire, soit d''un Internaute, soit d''un Administrateur', NbEssaisInfructueux INT DEFAULT NULL COMMENT 'Chaque fois qu''une authentification est infructueuse, le compteur est incr?ment? d''une unit?. Ce compteur sera remis ? 0 lorsque le compte sera d?bloqu? par un administrateur.', Banni TINYINT(1) DEFAULT NULL COMMENT 'Indique qu''un utilisateur (quel que soit son type) est banni. Cela veut dire qu''il ne pourra plus s''authentifier sur le site.', Inscript.Conf TINYINT(1) DEFAULT NULL COMMENT 'Indique si l''inscription est confirm?e ou non. Sans confirmation, l''utilisateur ne peux pas s''authentifi', id INT NOT NULL, CodePostalID INT DEFAULT NULL, CommuneID INT DEFAULT NULL, InternauteID INT DEFAULT NULL, Localit?ID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

-- Version DoctrineMigrations\Version20220123171323

-- Version DoctrineMigrations\Version20220127192548-- Doctrine Migration File Generated on 2022-01-27 19:35:39

-- Version DoctrineMigrations\Version20211209183848
CREATE TABLE categorie_de_services (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(10) NOT NULL, description VARCHAR(10) NOT NULL, en_avant TINYINT(1) NOT NULL, valide TINYINT(1) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE images (id INT AUTO_INCREMENT NOT NULL, ordre INT NOT NULL, image LONGBLOB NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE prestataire (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(255) NOT NULL, siteweb VARCHAR(255) NOT NULL, num_tel VARCHAR(10) NOT NULL, num_tva VARCHAR(10) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

-- Version DoctrineMigrations\Version20211209190828
ALTER TABLE prestataire CHANGE num_tva num_tva VARCHAR(20) NOT NULL;

-- Version DoctrineMigrations\Version20211209191147
ALTER TABLE categorie_de_services CHANGE nom nom VARCHAR(30) NOT NULL;

-- Version DoctrineMigrations\Version20211216124228
CREATE TABLE prestataire_categorie_de_services (prestataire_id INT NOT NULL, categorie_de_services_id INT NOT NULL, INDEX IDX_603DD9ABBE3DB2B7 (prestataire_id), INDEX IDX_603DD9AB4A81A587 (categorie_de_services_id), PRIMARY KEY(prestataire_id, categorie_de_services_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE prestataire_categorie_de_services ADD CONSTRAINT FK_603DD9ABBE3DB2B7 FOREIGN KEY (prestataire_id) REFERENCES prestataire (id) ON DELETE CASCADE;
ALTER TABLE prestataire_categorie_de_services ADD CONSTRAINT FK_603DD9AB4A81A587 FOREIGN KEY (categorie_de_services_id) REFERENCES categorie_de_services (id) ON DELETE CASCADE;

-- Version DoctrineMigrations\Version20220123171154
CREATE TABLE abus (Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Encodage DATE DEFAULT NULL, id INT NOT NULL, InternauteID INT DEFAULT NULL, CommentaireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE bloc (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Les noms attribu?s doivent ?tre uniques. Ils servent ? identifier les diff?rents blocs.', Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE cat?goriedeservices (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, EnAvant TINYINT(1) DEFAULT NULL COMMENT 'Attention, il ne peut y avoir qu''un seul service mis en avant ? la fois.', Valid TINYINT(1) DEFAULT NULL COMMENT 'Ce champ permet de savoir si la cat?gorie de services a ?t? encod?e par un prestataire et pas encore valid?e par un administrateur.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE categorys (id INT AUTO_INCREMENT NOT NULL, name INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE codepostal (CodePostal CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'La valeur de chaque code postal doit ?tre unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE commentaire (Titre CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Contenu CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Cote INT DEFAULT NULL COMMENT 'Valeur entre 0 et 5 repr?sent? id?alement avec des ?toiles.', Encodage DATE DEFAULT NULL, id INT NOT NULL, PrestataireID INT DEFAULT NULL, InternauteID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE commune (Commune CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Le nom de chaque commune doit ?tre unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE favori (PrestataireID INT DEFAULT NULL, InternauteID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE images (Ordre INT DEFAULT NULL, Image BLOB DEFAULT NULL, id INT NOT NULL, Cat?gorieDeServicesID INT DEFAULT NULL, InternauteID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE internaute (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Pr?nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Newsletter TINYINT(1) DEFAULT NULL COMMENT 'Ce champ indique si l''internaute est ou non abonn? aux newsletters. Si oui, il recevra automatiquement un mail lui annon?ant la pr?sence d''une nouvelle newsletter lorsque celle-ci sera ajout?e.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE localit (Localit CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Le nom de chaque localit? est unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE newsletter (Publication DATE DEFAULT NULL, Titre CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, DocumentPdf BLOB DEFAULT NULL, id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE position (Ordre INT DEFAULT NULL, id INT NOT NULL, InternauteID INT DEFAULT NULL, BlocID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE prestataires (name CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, website CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, number_phone CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, number_TVA CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, id INT NOT NULL, userID INT DEFAULT NULL, url_logo VARCHAR(50) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, desc_long VARCHAR(255) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, desc_short VARCHAR(255) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, date_create DATE NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE promotion (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, DocumentPdf BLOB DEFAULT NULL, D?but DATE DEFAULT NULL, Fin DATE DEFAULT NULL, AffichageDe DATE DEFAULT NULL, AffichageJusque DATE DEFAULT NULL, id INT NOT NULL, CategorysServiceID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE proposer (CategorysServiceID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE stage (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Tarif CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, InfoCompl?mentaire CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, D?but DATE DEFAULT NULL, Fin DATE DEFAULT NULL, AffichageDe DATE DEFAULT NULL, AffichageJusque DATE DEFAULT NULL, id INT NOT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE utilisateur (Email CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Adresse email valide (du moins dans sa forme c?d : ccc@cccc.ccc). Cette adresse doit ?tre unique.', MotDePasse CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Il s''agit du mot de passe crypt', AdresseN? CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, AdresseRue CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Inscription DATE DEFAULT NULL, TypeUtilisateur CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Il s''agit soit d''un Prestataire, soit d''un Internaute, soit d''un Administrateur', NbEssaisInfructueux INT DEFAULT NULL COMMENT 'Chaque fois qu''une authentification est infructueuse, le compteur est incr?ment? d''une unit?. Ce compteur sera remis ? 0 lorsque le compte sera d?bloqu? par un administrateur.', Banni TINYINT(1) DEFAULT NULL COMMENT 'Indique qu''un utilisateur (quel que soit son type) est banni. Cela veut dire qu''il ne pourra plus s''authentifier sur le site.', Inscript.Conf TINYINT(1) DEFAULT NULL COMMENT 'Indique si l''inscription est confirm?e ou non. Sans confirmation, l''utilisateur ne peux pas s''authentifi', id INT NOT NULL, CodePostalID INT DEFAULT NULL, CommuneID INT DEFAULT NULL, InternauteID INT DEFAULT NULL, Localit?ID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

-- Version DoctrineMigrations\Version20220123171323

-- Version DoctrineMigrations\Version20220127192548
CREATE TABLE images (id INT AUTO_INCREMENT NOT NULL, ordre INT NOT NULL, image LONGBLOB NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE prestataire (id INT AUTO_INCREMENT NOT NULL, nom VARCHAR(255) NOT NULL, siteweb VARCHAR(255) NOT NULL, num_tel VARCHAR(10) NOT NULL, num_tva VARCHAR(10) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE prestataire CHANGE num_tva num_tva VARCHAR(20) NOT NULL;
ALTER TABLE categorie_de_services CHANGE nom nom VARCHAR(30) NOT NULL;

CREATE TABLE prestataire_categorie_de_services (prestataire_id INT NOT NULL, categorie_de_services_id INT NOT NULL, INDEX IDX_603DD9ABBE3DB2B7 (prestataire_id), INDEX IDX_603DD9AB4A81A587 (categorie_de_services_id), PRIMARY KEY(prestataire_id, categorie_de_services_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE prestataire_categorie_de_services ADD CONSTRAINT FK_603DD9ABBE3DB2B7 FOREIGN KEY (prestataire_id) REFERENCES prestataire (id) ON DELETE CASCADE;
ALTER TABLE prestataire_categorie_de_services ADD CONSTRAINT FK_603DD9AB4A81A587 FOREIGN KEY (categorie_de_services_id) REFERENCES categorie_de_services (id) ON DELETE CASCADE;

CREATE TABLE abus (Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Encodage DATE DEFAULT NULL, id INT NOT NULL, InternauteID INT DEFAULT NULL, CommentaireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE bloc (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Les noms attribu?s doivent ?tre uniques. Ils servent ? identifier les diff?rents blocs.', Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE cat?goriedeservices (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Description CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, EnAvant TINYINT(1) DEFAULT NULL COMMENT 'Attention, il ne peut y avoir qu''un seul service mis en avant ? la fois.', Valid TINYINT(1) DEFAULT NULL COMMENT 'Ce champ permet de savoir si la cat?gorie de services a ?t? encod?e par un prestataire et pas encore valid?e par un administrateur.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE categorys (id INT AUTO_INCREMENT NOT NULL, name INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE codepostal (CodePostal CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'La valeur de chaque code postal doit ?tre unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE commentaire (Titre CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Contenu CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Cote INT DEFAULT NULL COMMENT 'Valeur entre 0 et 5 repr?sent? id?alement avec des ?toiles.', Encodage DATE DEFAULT NULL, id INT NOT NULL, PrestataireID INT DEFAULT NULL, InternauteID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE commune (Commune CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Le nom de chaque commune doit ?tre unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE favori (PrestataireID INT DEFAULT NULL, InternauteID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE images (Ordre INT DEFAULT NULL, Image BLOB DEFAULT NULL, id INT NOT NULL, Cat?gorieDeServicesID INT DEFAULT NULL, InternauteID INT DEFAULT NULL, PrestataireID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE internaute (Nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Pr?nom CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, Newsletter TINYINT(1) DEFAULT NULL COMMENT 'Ce champ indique si l''internaute est ou non abonn? aux newsletters. Si oui, il recevra automatiquement un mail lui annon?ant la pr?sence d''une nouvelle newsletter lorsque celle-ci sera ajout?e.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE localit (Localit CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci COMMENT 'Le nom de chaque localit? est unique.', id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE newsletter (Publication DATE DEFAULT NULL, Titre CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, DocumentPdf BLOB DEFAULT NULL, id INT NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE position (Ordre INT DEFAULT NULL, id INT NOT NULL, InternauteID INT DEFAULT NULL, BlocID INT DEFAULT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

CREATE TABLE prestataires (name CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, website CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, number_phone CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, number_TVA CHAR(10) CHARACTER SET utf8 DEFAULT NULL COLLATE utf8_general_ci, id INT NOT NULL, userID INT DEFAULT NULL, url_logo VARCHAR(50) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, desc_long VARCHAR(255) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, desc_short VARCHAR(255) CHARACTER SET utf8 NOT NULL COLLATE utf8_general_ci, date_create DATE NOT NULL) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;

-- Version DoctrineMigrations\Version20220123171323

-- Version DoctrineMigrations\Version20220127192548